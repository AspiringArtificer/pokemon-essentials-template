# Lappet Town (2)
map(
  autoplay_bgm: true,
  bgm: audio(name: "Lappet Town", volume: 80),
  events: [

    event(
      id: 1,
      name: "Home door",
      x: 8,
      y: 7,
      page_0: page(
        graphic: graphic(
          name: "doors5",
        ),
        trigger: :player_touch,
        commands: [
          *move_route(
            this,
            route_play_se(audio(name: "Door enter")),
            route_wait(2),
            turn_left,
            route_wait(2),
            turn_right,
            route_wait(2),
            turn_up,
            route_wait(2),
            skippable: true,
          ),
          wait_completion,
          *move_route(
            player,
            through_on,
            move_up,
            through_off,
            skippable: true,
          ),
          wait_completion,
          change_transparent_flag(:transparent),
          script("Followers.follow_into_door"),
          wait_completion,
          *move_route(
            this,
            route_wait(2),
            turn_right,
            route_wait(2),
            turn_left,
            route_wait(2),
            turn_down,
            route_wait(2),
            skippable: true,
          ),
          wait_completion,
          change_tone(red: -255, green: -255, blue: -255, frames: 6),
          wait(8),
          change_transparent_flag(:normal),
          transfer_player(map: 3, x: 3, y: 8, direction: :up, fading: false),
          change_tone(red: 0, green: 0, blue: 0, frames: 6),
        ],
      ),
      page_1: page(
        switch1: s(22),
        graphic: graphic(
          name: "doors5",
        ),
        trigger: :autorun,
        commands: [
          *condition(
            script: "get_self.onEvent?",
            then: [
              change_transparent_flag(:transparent),
              script("Followers.hide_followers"),
              *move_route(
                this,
                route_play_se(audio(name: "Door enter")),
                route_wait(2),
                turn_left,
                route_wait(2),
                turn_right,
                route_wait(2),
                turn_up,
                route_wait(2),
                skippable: true,
              ),
              wait_completion,
              change_transparent_flag(:normal),
              *move_route(
                player,
                move_down,
                skippable: true,
              ),
              wait_completion,
              script("Followers.put_followers_on_player"),
              *move_route(
                this,
                turn_right,
                route_wait(2),
                turn_left,
                route_wait(2),
                turn_down,
                route_wait(2),
                skippable: true,
              ),
              wait_completion,
            ],
          ),
          script("setTempSwitchOn(\"A\")"),
        ],
      ),
    ),

    event(
      id: 2,
      name: "Lab door",
      x: 18,
      y: 13,
      page_0: page(
        graphic: graphic(
          name: "doors3",
          pattern: 1,
        ),
        trigger: :player_touch,
        commands: [
          *move_route(
            this,
            route_play_se(audio(name: "Door enter")),
            route_wait(2),
            turn_left,
            route_wait(2),
            turn_right,
            route_wait(2),
            turn_up,
            route_wait(2),
            skippable: true,
          ),
          wait_completion,
          *move_route(
            player,
            through_on,
            move_up,
            through_off,
            skippable: true,
          ),
          wait_completion,
          change_transparent_flag(:transparent),
          script("Followers.follow_into_door"),
          wait_completion,
          *move_route(
            this,
            route_wait(2),
            turn_right,
            route_wait(2),
            turn_left,
            route_wait(2),
            turn_down,
            route_wait(2),
            skippable: true,
          ),
          wait_completion,
          change_tone(red: -255, green: -255, blue: -255, frames: 6),
          wait(8),
          change_transparent_flag(:normal),
          transfer_player(map: 4, x: 6, y: 12, direction: :up, fading: false),
          change_tone(red: 0, green: 0, blue: 0, frames: 6),
        ],
      ),
      page_1: page(
        switch1: s(22),
        graphic: graphic(
          name: "doors3",
          pattern: 1,
        ),
        trigger: :autorun,
        commands: [
          *condition(
            script: "get_self.onEvent?",
            then: [
              change_transparent_flag(:transparent),
              script("Followers.hide_followers"),
              *move_route(
                this,
                route_play_se(audio(name: "Door enter")),
                route_wait(2),
                turn_left,
                route_wait(2),
                turn_right,
                route_wait(2),
                turn_up,
                route_wait(2),
                skippable: true,
              ),
              wait_completion,
              change_transparent_flag(:normal),
              *move_route(
                player,
                move_down,
                skippable: true,
              ),
              wait_completion,
              script("Followers.put_followers_on_player"),
              *move_route(
                this,
                turn_right,
                route_wait(2),
                turn_left,
                route_wait(2),
                turn_down,
                route_wait(2),
                skippable: true,
              ),
              wait_completion,
            ],
          ),
          script("setTempSwitchOn(\"A\")"),
        ],
      ),
    ),

    event(
      id: 3,
      name: "Door explainer",
      x: 12,
      y: 7,
      page_0: page(
        graphic: graphic(
          name: "NPC 06",
        ),
        move_frequency: 6,
        commands: [
          *text(
            "\\bThese doors are examples of good, solid door ",
            "events.",
          ),
          *text(
            "\\bWhen the player goes outside, be sure to transfer ",
            "the player onto the door rather than next to it.  It looks ",
            "better that way.",
          ),
        ],
      ),
    ),

    event(
      id: 4,
      name: "Next door",
      x: 17,
      y: 7,
      page_0: page(
        graphic: graphic(
          name: "doors5",
        ),
        trigger: :player_touch,
        commands: [
          *move_route(
            this,
            route_play_se(audio(name: "Door enter")),
            route_wait(2),
            turn_left,
            route_wait(2),
            turn_right,
            route_wait(2),
            turn_up,
            route_wait(2),
            skippable: true,
          ),
          wait_completion,
          *move_route(
            player,
            through_on,
            move_up,
            through_off,
            skippable: true,
          ),
          wait_completion,
          change_transparent_flag(:transparent),
          script("Followers.follow_into_door"),
          wait_completion,
          *move_route(
            this,
            route_wait(2),
            turn_right,
            route_wait(2),
            turn_left,
            route_wait(2),
            turn_down,
            route_wait(2),
            skippable: true,
          ),
          wait_completion,
          change_tone(red: -255, green: -255, blue: -255, frames: 6),
          wait(8),
          change_transparent_flag(:normal),
          transfer_player(map: 8, x: 3, y: 8, direction: :up, fading: false),
          change_tone(red: 0, green: 0, blue: 0, frames: 6),
        ],
      ),
      page_1: page(
        switch1: s(22),
        graphic: graphic(
          name: "doors5",
        ),
        trigger: :autorun,
        commands: [
          *condition(
            script: "get_self.onEvent?",
            then: [
              change_transparent_flag(:transparent),
              script("Followers.hide_followers"),
              *move_route(
                this,
                route_play_se(audio(name: "Door enter")),
                route_wait(2),
                turn_left,
                route_wait(2),
                turn_right,
                route_wait(2),
                turn_up,
                route_wait(2),
                skippable: true,
              ),
              wait_completion,
              change_transparent_flag(:normal),
              *move_route(
                player,
                move_down,
                skippable: true,
              ),
              wait_completion,
              script("Followers.put_followers_on_player"),
              *move_route(
                this,
                turn_right,
                route_wait(2),
                turn_left,
                route_wait(2),
                turn_down,
                route_wait(2),
                skippable: true,
              ),
              wait_completion,
            ],
          ),
          script("setTempSwitchOn(\"A\")"),
        ],
      ),
    ),

  ],
  data: table(
    x: 32,
    y: 21,
    z: 3,
    data: [
       808,  809,  808,  809,  808,  809,  808,  809,  808,  809,  808,  809,  808,  811,  395,  396,  810,  809,  808,  809,  808,  809,  808,  809,  808,  809,  808,  809,  808,  809,  808,  809,
       800,  801,  800,  803,  818,  819,  818,  819,  818,  819,  818,  819,  818,  819,  403,  404,  818,  819,  818,  819,  818,  819,  818,  819,  802,  801,  800,  801,  800,  801,  800,  801,
       808,  809,  808,  811,  395,  393,  393,  393,  393,  393,  393,  393,  393,  393,  422,  421,  393,  393,  393,  393,  393,  393,  393,  394,  810,  809,  808,  809,  808,  809,  808,  809,
       800,  801,  800,  803,  403,  401,  401,  401,  401,  401,  401,  401,  401,  401,  401,  401,  401,  401,  401,  401,  401,  401,  401,  402,  802,  801,  800,  801,  800,  801,  800,  801,
       808,  809,  808,  811,  403,  397,  409,  409,  409,  409,  409,  409,  398,  401,  397,  409,  409,  409,  409,  409,  409,  409,  414,  402,  810,  809,  808,  809,  808,  809,  808,  809,
       800,  801,  800,  803,  403,  402,  388,  385,  385,  385,  385,  387,  400,  401,  402,  385,  385,  385,  385,  385,  387,  388,  403,  402,  802,  801,  800,  801,  800,  801,  800,  801,
       808,  809,  808,  811,  403,  402,  385,  385,  385,  385,  385,  387,  400,  401,  402,  388,  387,  385,  387,  385,  385,  387,  403,  402,  810,  809,  808,  809,  808,  809,  808,  809,
       818,  819,  818,  819,  403,  402,  387,  400,  401,  402,  387,  385,  400,  401,  402,  385,  400,  401,  402,  385,  387,  385,  403,  402,  802,  801,  800,  801,  800,  801,  800,  801,
       385,  386,  387,  388,  403,  405,  393,  406,  401,  405,  393,  393,  406,  401,  405,  393,  406,  401,  405,  393,  393,  393,  422,  402,  810,  809,  808,  809,  808,  809,  808,  809,
       386,  389,  395,  393,  422,  401,  401,  401,  401,  401,  401,  401,  401,  401,  401,  401,  401,  401,  401,  401,  401,  401,  401,  402,  802,  801,  800,  801,  800,  801,  800,  801,
       387,  388,  403,  401,  401,  401,  401,  401,  401,  401,  401,  401,  401,  401,  397,  409,  409,  409,  409,  409,  409,  409,  414,  402,  810,  809,  808,  809,  808,  809,  808,  809,
       386,  385,  411,  409,  414,  401,  397,  409,  409,  409,  409,  409,  398,  401,  402,  385,  385,  385,  385,  385,  385,  385,  403,  402,  802,  801,  800,  801,  800,  801,  800,  801,
       810,  811,  810,  811,  403,  401,  402,  274,  260,  260,  276,  385,  400,  401,  402,  385,  385,  385,  385,  385,  385,  385,  403,  402,  810,  809,  808,  809,  808,  809,  808,  809,
       800,  801,  800,  803,  403,  401,  402,  280,  268,  268,  278,  387,  400,  401,  402,  385,  385,  400,  401,  402,  385,  385,  403,  402,  802,  801,  800,  801,  800,  801,  800,  801,
       808,  809,  808,  811,  403,  401,  402,  385,  387,  385,  388,  385,  400,  401,  405,  393,  393,  406,  401,  405,  393,  393,  422,  402,  810,  809,  808,  809,  808,  809,  808,  809,
       800,  801,  800,  803,  403,  401,  405,  393,  393,  393,  393,  393,  406,  401,  397,  409,  409,  409,  409,  409,  409,  398,  401,  402,  802,  801,  800,  801,  800,  801,  800,  801,
       808,  809,  808,  811,  403,  401,  401,  401,  401,  401,  401,  401,  401,  401,  419,  417,  417,  417,  417,  417,  417,  420,  401,  402,  810,  809,  808,  809,  808,  809,  808,  809,
       800,  801,  800,  803,  411,  409,  409,  409,  409,  409,  409,  409,  398,  401,  401,  401,  401,  401,  401,  401,  401,  401,  401,  402,  802,  801,  800,  801,  800,  801,  800,  801,
       808,  809,  808,  811,  385,  388,  387,  388,  385, 1088, 1089, 1090,  408,  398,  401,  401,  397,  409,  409,  409,  409,  409,  409,  410,  810,  809,  808,  809,  808,  809,  808,  809,
       800,  801,  800,  803,  387,  385,  385,  389,  387, 1096, 1097, 1106, 1090,  400,  401,  401,  402,  388,  389,  388,  387,  385,  388,  387,  802,  801,  800,  801,  800,  801,  800,  801,
       808,  809,  808,  811,  810,  811,  810,  811,  388, 1096, 1097, 1097, 1098,  408,  409,  409,  410,  388,  389,  385,  810,  811,  810,  811,  810,  809,  808,  809,  808,  809,  808,  809,

         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0, 1960, 1961, 1962, 1963, 1964,    0,    0,    0,    0, 1960, 1961, 1962, 1963, 1964,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0, 1968, 1969, 1970, 1971, 1972,    0,    0,    0,    0, 1968, 1969, 1970, 1971, 1972,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0, 1976, 1977, 1978, 1979, 1980,    0,    0,    0,    0, 1976, 1977, 1978, 1979, 1980,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0, 1346, 1984, 1985, 1986, 1987, 1988,    0,    0,    0, 1346, 1984, 1985, 1986, 1987, 1988,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0, 1354, 1992, 1993, 1994, 1995, 1996,    0,    0,    0, 1354, 1992, 1993, 1994, 1995, 1996,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0, 3454, 3475, 3474, 3475, 3477, 3478, 3479,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0, 3462, 3483, 3482, 3483, 3485, 3486, 3487,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0, 1680, 1681, 1681, 1681, 1682,    0,    0,    0, 3470, 3491, 3490, 3491, 3493, 3494, 3495,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0, 3496, 3497, 3498, 3499, 3501, 3502, 3503,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0, 3504, 3505, 3506, 3507, 3509, 3510, 3511,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0, 1680, 1681, 1681, 1681, 1681, 1682,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0, 1128, 1129, 1130,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0, 1136,    0, 1146, 1130,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0, 1689, 1136,    0,    0, 1138,    0,    0,    0,    0, 1680, 1681, 1682,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,

         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
       804,  805,  804,  805,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,  804,  805,  804,  805,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,  804,  805,  804,  805,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0, 1661,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
    ],
  ),
)
