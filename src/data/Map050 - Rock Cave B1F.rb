# Route 7 (47)
#   Rock Cave 1F (49)
#     Rock Cave B1F (50)
map(
  tileset_id: 6,
  autoplay_bgm: true,
  bgm: audio(name: "Cave", volume: 80),
  events: [

    event(
      id: 1,
      name: "Ladder",
      x: 10,
      y: 12,
      page_0: page(
        trigger: :player_touch,
        commands: [
          play_se(audio(name: "Door exit", volume: 80)),
          change_tone(red: -255, green: -255, blue: -255, frames: 6),
          wait(8),
          transfer_player(map: 49, x: 10, y: 13, direction: :down, fading: false),
          change_tone(red: 0, green: 0, blue: 0, frames: 6),
        ],
      ),
    ),

    event(
      id: 2,
      name: "StrengthBoulder",
      x: 11,
      y: 7,
      page_0: page,
      page_1: page(
        switch1: s(57),
        graphic: graphic(
          name: "Object boulder",
        ),
        move_speed: 2,
        trigger: :player_touch,
        commands: [
          script("pbPushThisBoulder"),
        ],
      ),
    ),

    event(
      id: 3,
      name: "Sign",
      x: 14,
      y: 7,
      page_0: page(
        commands: [
          *text(
            "When pushing a boulder down a hole, make sure it ",
            "doesn't appear in the same place as the player does ",
            "when they drop down.",
          ),
        ],
      ),
    ),

    event(
      id: 4,
      name: "NPC",
      x: 21,
      y: 12,
      page_0: page(
        graphic: graphic(
          name: "trainer_GENTLEMAN",
          direction: :left,
        ),
        commands: [
          text("\\bHello! I'm the Ruin Maniac!"),
          text("\\bDo you want to dig for buried treasure?"),
          *show_choices(
            choices: ["Yes", "No"],
            cancellation: 2,
            choice1: [
              text("\\bGrand! Let's dig into this wall."),
              *condition(
                character: player,
                facing: :right,
                then: [
                  *move_route(
                    player,
                    move_down,
                    move_right,
                  ),
                  *move_route(
                    this,
                    turn_down,
                  ),
                  wait_completion,
                ],
                else: [
                  *move_route(
                    player,
                    turn_right,
                  ),
                  wait_completion,
                ],
              ),
              script("pbMiningGame"),
            ],
            choice2: [
              text("\\bNo? Alright then."),
            ],
          ),
          *text(
            "\\bWhen using this mining minigame, it is ",
            "recommended that you limit how often the player can ",
            "play it, to prevent them gaining lots of items for free.",
          ),
        ],
      ),
    ),

  ],
  data: table(
    x: 30,
    y: 26,
    z: 3,
    data: [
       529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,
       529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,
       529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,
       529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  513,  513,  513,  536,
       529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  513,  513,  536,  513,  513,
       611,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  513,  513,  513,  513,  513,  513,
       611,  610,  610,  610,  610,  610,  611,  610,  610,  609,  610,  610,  610,  610,  610,  610,  611,  610,  610,  610,  610,  610,  610,  513,  513,  513,  536,  513,  513,  513,
       619,  610,  610,  610,  610,  610,  611,  610,  610,  609,  610,  610,  610,  610,  610,  610,  611,  610,  610,  610,  610,  610,  610,  513,  513,  513,  513,  513,  513,  536,
       610,  610,  610,  610,  610,  610,  611,  610,  610,  617,  618,  618,  610,  610,  618,  618,  619,  610,  610,  610,  610,  610,  610,  513,  513,  513,  513,  536,  513,  513,
       610,  610,  610,  610,  610,  610,  611,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  513,  513,  513,  513,  513,  513,  513,
       610,  610,  610,  610,  610,  610,  611,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  513,  513,  513,  536,  513,  513,  536,
       610,  610,  610,  610,  610,  610,  611,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  513,  513,  513,  513,  513,  513,  513,
       610,  610,  610,  610,  610,  610,  611,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  513,  513,  513,  513,  513,  513,  513,
       611,  610,  610,  610,  610,  610,  611,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  542,  543,  610,  610,  513,  513,  513,  513,  513,  513,  513,
       611,  610,  610,  610,  610,  610,  611,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  550,  551,  610,  610,  513,  513,  513,  513,  513,  513,  513,
       611,  610,  610,  610,  610,  610,  611,  610,  610,  610,  610,  610,  610,  610,  610,  604,  618,  618,  618,  618,  618,  618,  618,  513,  513,  513,  513,  513,  513,  513,
       611,  610,  610,  610,  610,  610,  611,  610,  610,  610,  610,  610,  610,  610,  610,  611,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,
       611,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  611,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,
       619,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  610,  611,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,
       618,  618,  618,  618,  618,  618,  618,  618,  618,  618,  618,  618,  618,  618,  618,  619,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,
       494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,
       494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,
       494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,
       494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,
       494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,
       494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,  494,

       529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  521,  521,  521,  521,  521,
       529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  521,  521,  521,  521,  521,  521,
       529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  521,  521,  521,  521,  521,  521,  521,
       529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  521,  521,  521,  511,    0,    0,    0,    0,
       529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  521,  521,  521,  511,  512,    0,    0,    0,    0,
         0,  571,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  529,  521,  521,  521,  511,  512,  512,    0,    0,    0,    0,
         0,  514,    0,    0,  559,  565,    0,  510,  511,    0,    0,    0,    0,    0,    0,    0,    0,  510,  521,  526,  527,  521,  511,  512,  512,  512,    0,    0,    0,    0,
         0,  514,    0,    0,  567,    0,    0,  514,  512,    0,    0,    0,    0,    0,  447,    0,    0,  514,    0,  534,  535,    0,  512,  512,  512,  512,    0,    0,    0,    0,
       521,  522,    0,    0,    0,    0,    0,  514,  512,    0,    0,    0,    0,    0,    0,    0,    0,  514,    0,    0,    0,    0,  512,  512,  512,  512,    0,    0,    0,    0,
         0,  557,    0,    0,    0,    0,    0,  514,  520,  521,  521,  521,  539,  539,  521,  521,  521,  522,    0,    0,    0,  565,  512,  512,  512,  512,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,  514,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,  565,  512,  512,  512,  512,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,  514,    0,    0,  565,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,  512,  512,  512,  512,    0,    0,    0,    0,
       603,  506,    0,    0,    0,    0,    0,  514,    0,  565,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,  512,  512,  512,  520,  521,  521,  521,  521,
         0,  514,    0,    0,    0,    0,    0,  514,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,  512,  512,  520,  521,  521,  521,  521,  521,
         0,  514,    0,    0,    0,  558,    0,  514,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,  512,  520,  521,  521,  521,  521,  521,  521,
         0,  514,    0,    0,    0,  566,    0,  514,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,  520,  521,  521,  521,  521,  521,  521,  521,
         0,  514,    0,    0,    0,    0,    0,  514,    0,    0,    0,    0,    0,    0,    0,    0,  510,  521,  521,  521,  521,  521,  521,  521,  521,  521,  521,  521,  521,  521,
         0,  514,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,  514,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,  514,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,  557,    0,  514,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
       521,  522,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,  514,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
       521,  521,  521,  521,  521,  521,  521,  521,  521,  521,  521,  521,  521,  521,  521,  521,  522,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,

         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,  552,  554,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,  560,  562,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,  560,  562,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,  560,  562,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,  560,  562,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,  560,  562,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,  560,  562,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,  560,  562,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,  560,  562,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,  560,  562,    0,    0,    0,    0,    0,    0,  540,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,  560,  562,    0,    0,    0,    0,    0,    0,  548,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,  560,  562,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,  560,  562,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,  560,  562,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,  560,  563,  553,  553,  553,  553,  553,  553,  553,  553,  554,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,  568,  569,  569,  569,  569,  569,  569,  569,  569,  569,  570,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,  576,  577,  577,  577,  577,  577,  577,  577,  577,  577,  578,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,  576,  577,  577,  577,  577,  577,  577,  577,  577,  577,  578,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
    ],
  ),
)
