# Cedolan City (7)
#   Cedolan Dept. 1F (14)
#     Cedolan Dept. Rooftop (19)
map(
  tileset_id: 10,
  autoplay_bgm: true,
  bgm: audio(name: "Poke Mart", volume: 80),
  events: [

    event(
      id: 1,
      name: "Exit",
      x: 23,
      y: 10,
      page_0: page(
        trigger: :player_touch,
        commands: [
          play_se(audio(name: "Door exit", volume: 80)),
          change_tone(red: -255, green: -255, blue: -255, frames: 6),
          wait(8),
          transfer_player(map: 18, x: 3, y: 2, direction: :retain, fading: false),
          change_tone(red: 0, green: 0, blue: 0, frames: 6),
        ],
      ),
    ),

    event(
      id: 2,
      name: "Vending machine size(3,1)",
      x: 17,
      y: 7,
      page_0: page(
        commands: condition(
          character: player,
          facing: :up,
          then: [
            label("Start"),
            *text(
              "It's a vending machine.\\nWhich drink would you like?",
              "\\G",
            ),
            *show_choices(
              choices: ["Fresh Water - $200", "Soda Pop - $300", "Lemonade - $350", "Cancel"],
              cancellation: 4,
              choice1: [
                *condition(
                  gold: 200,
                  operation: ">=",
                  then: condition(
                    script: "$bag.can_add?(:FRESHWATER)",
                    then: [
                      change_gold("-=", constant: 200),
                      script("$stats.drinks_bought += 1"),
                      script("$bag.add(:FRESHWATER)"),
                      play_se(audio(name: "Vending machine dispense", volume: 80)),
                      text("\\GA Fresh Water dropped down!"),
                      control_variables(v(1), random: 0..10),
                      *condition(
                        variable: v(1),
                        operation: "==",
                        constant: 0,
                        then: condition(
                          script: "$bag.can_add?(:FRESHWATER)",
                          then: [
                            script("$stats.drinks_won += 1"),
                            script("$bag.add(:FRESHWATER)"),
                            play_se(audio(name: "Vending machine dispense", volume: 80)),
                            text("\\GBonus! Another Fresh Water dropped down."),
                          ],
                        ),
                      ),
                      jump_label("Start"),
                    ],
                    else: [
                      text("\\GYou have no room left in the Bag."),
                    ],
                  ),
                  else: [
                    text("\\GYou don't have enough money."),
                  ],
                ),
              ],
              choice2: [
                *condition(
                  gold: 300,
                  operation: ">=",
                  then: condition(
                    script: "$bag.can_add?(:SODAPOP)",
                    then: [
                      change_gold("-=", constant: 300),
                      script("$stats.drinks_bought += 1"),
                      script("$bag.add(:SODAPOP)"),
                      play_se(audio(name: "Vending machine dispense", volume: 80)),
                      text("\\GA Soda Pop dropped down!"),
                      control_variables(v(1), random: 0..10),
                      *condition(
                        variable: v(1),
                        operation: "==",
                        constant: 0,
                        then: condition(
                          script: "$bag.can_add?(:SODAPOP)",
                          then: [
                            script("$stats.drinks_won += 1"),
                            script("$bag.add(:SODAPOP)"),
                            play_se(audio(name: "Vending machine dispense", volume: 80)),
                            text("\\GBonus! Another Soda Pop dropped down."),
                          ],
                        ),
                      ),
                      jump_label("Start"),
                    ],
                    else: [
                      text("\\GYou have no room left in the Bag."),
                    ],
                  ),
                  else: [
                    text("\\GYou don't have enough money."),
                  ],
                ),
              ],
              choice3: [
                *condition(
                  gold: 350,
                  operation: ">=",
                  then: condition(
                    script: "$bag.can_add?(:LEMONADE)",
                    then: [
                      change_gold("-=", constant: 350),
                      script("$stats.drinks_bought += 1"),
                      script("$bag.add(:LEMONADE)"),
                      play_se(audio(name: "Vending machine dispense", volume: 80)),
                      text("\\GA Lemonade dropped down!"),
                      control_variables(v(1), random: 0..10),
                      *condition(
                        variable: v(1),
                        operation: "==",
                        constant: 0,
                        then: condition(
                          script: "$bag.can_add?(:LEMONADE)",
                          then: [
                            script("$stats.drinks_won += 1"),
                            script("$bag.add(:LEMONADE)"),
                            play_se(audio(name: "Vending machine dispense", volume: 80)),
                            text("\\GBonus! Another Lemonade dropped down."),
                          ],
                        ),
                      ),
                      jump_label("Start"),
                    ],
                    else: [
                      text("\\GYou have no room left in the Bag."),
                    ],
                  ),
                  else: [
                    text("\\GYou don't have enough money."),
                  ],
                ),
              ],
              choice4: [
                text("\\GDecided not to buy a drink."),
              ],
            ),
          ],
        ),
      ),
    ),

    event(
      id: 5,
      name: "Floor sign",
      x: 21,
      y: 7,
      page_0: page(
        commands: [
          text("\\sign[signskin]Rooftop Square: Vending Machines"),
        ],
      ),
    ),

  ],
  data: table(
    x: 32,
    y: 20,
    z: 3,
    data: [
       667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,
       667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,
       667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,
       667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,
       667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,  667,
       667,  667,  667,  667,  667,  667,  667,  640,  641,  641,  641,  641,  641,  641,  641,  641,  641,  641,  641,  641,  641,  641,  641,  641,  641,  642,  667,  667,  667,  667,  667,  667,
       667,  667,  667,  667,  667,  667,  667,  648,  649,  649,  649,  649,  649,  649,  649,  649,  649,  649,  649,  649,  649,  649,  649,  649,  649,  650,  667,  667,  667,  667,  667,  667,
       667,  667,  667,  667,  667,  667,  667,  656,  697,  705,  705,  705,  705,  705,  705,  705,  705,  697,  697,  697,  697,  697,  697,  697,  697,  658,  667,  667,  667,  667,  667,  667,
       667,  667,  667,  667,  667,  667,  667,  656,  697,  688,  688,  688,  688,  688,  688,  688,  688,  705,  705,  705,  705,  705,  705,  705,  705,  658,  667,  667,  667,  667,  667,  667,
       667,  667,  667,  667,  667,  667,  667,  656,  697,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  658,  667,  667,  667,  667,  667,  667,
       667,  667,  667,  667,  667,  667,  667,  656,  697,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  658,  667,  667,  667,  667,  667,  667,
       667,  667,  667,  667,  667,  667,  667,  656,  697,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  658,  667,  667,  667,  667,  667,  667,
       667,  667,  667,  667,  667,  667,  667,  664,  697,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  688,  666,  667,  667,  667,  667,  667,  667,
       667,  667,  667,  667,  667,  667,  667,  672,  673,  673,  673,  673,  673,  673,  673,  673,  673,  673,  673,  673,  673,  673,  673,  673,  673,  674,  667,  667,  667,  667,  667,  667,
       667,  667,  667,  667,  667,  667,  667,  680,  681,  681,  681,  681,  681,  681,  681,  681,  681,  681,  681,  681,  681,  681,  681,  681,  681,  682,  667,  667,  667,  667,  667,  667,
       667,  667,  667,  667,  667,  667,  667,  680,  681,  675,  676,  677,  675,  676,  677,  675,  676,  677,  675,  676,  677,  675,  676,  677,  681,  682,  667,  667,  667,  667,  667,  667,
       667,  667,  667,  667,  667,  667,  667,  680,  681,  683,  684,  685,  683,  684,  685,  683,  684,  685,  683,  684,  685,  683,  684,  685,  681,  682,  667,  667,  667,  667,  667,  667,
       667,  667,  667,  667,  667,  667,  667,  680,  681,  681,  681,  681,  681,  681,  681,  681,  681,  681,  681,  681,  681,  681,  681,  681,  681,  682,  667,  667,  667,  667,  667,  667,
       667,  667,  667,  667,  667,  667,  667,  680,  681,  675,  676,  677,  675,  676,  677,  675,  676,  677,  675,  676,  677,  675,  676,  677,  681,  682,  667,  667,  667,  667,  667,  667,
       667,  667,  667,  667,  667,  667,  667,  680,  681,  683,  684,  685,  683,  684,  685,  683,  684,  685,  683,  684,  685,  683,  684,  685,  681,  682,  667,  667,  667,  667,  667,  667,

         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,  644,  645,  645,  645,  646,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,  652,  653,  653,  653,  654,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,  723,  723,  723,  660,  661,  661,  652,  654,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,  724,  731,  731,  731,  668,  669,  669,  652,  654,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,  693,  694,  694,  695,    0,    0,    0,    0,    0,    0,    0,    0,    0,  652,  654,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,  701,  702,  702,  703,    0,    0,    0,    0,    0,    0,    0,    0,  693,  652,  654,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,  701,  702,  702,  703,    0,    0,    0,    0,    0,    0,    0,    0,  701,  652,  654,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,  709,  710,  710,  711,    0,    0,    0,    0,    0,    0,    0,    0,  717,  660,  662,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,  665,  665,  665,  665,  665,  665,  665,  665,  665,  665,  665,  665,  665,  665,  665,  668,  670,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,

         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,  534,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,  542,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,  643,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,  716,  712,  713,  715,    0,    0,    0,    0,    0,    0,    0,    0,  651,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,  716,  720,  721,  715,    0,    0,    0,    0,    0,    0,    0,    0,  659,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,  728,  729,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,  665,  665,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
    ],
  ),
)
